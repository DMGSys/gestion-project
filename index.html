<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gesti√≥n de Proyectos</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <header class="app__header">
        <div>
          <h1>Seguimiento de Proyectos de IT</h1>
          <p class="app__subtitle">
            Registra estimaciones de tiempo, tareas, fechas y responsables para mantener el control.
          </p>
          <div class="app__metadata" id="lastUpdateInfo">
            <span class="metadata__label">√öltima actualizaci√≥n:</span>
            <span class="metadata__value" id="lastUpdateTime">Cargando...</span>
            <span class="metadata__status" id="saveStatus"></span>
          </div>
        </div>
        <div class="app__actions">
          <button id="toggleTheme" class="button button--ghost" type="button" title="Cambiar tema">
            <span id="themeIcon">üåô</span>
          </button>
          <button id="toggleView" class="button button--secondary" type="button">
            Ver como lista
          </button>
          <button id="toggleTimeline" class="button button--secondary" type="button">
            Ver l√≠nea de tiempo
          </button>
          <div class="toolbar" role="group" aria-label="Herramientas de datos">
            <input
              id="importFile"
              class="toolbar__file-input"
              type="file"
              accept="application/json"
            />
            <button id="importButton" class="button button--ghost" type="button">
              Importar JSON
            </button>
            <button id="exportButton" class="button button--ghost" type="button">
              Exportar JSON
            </button>
          </div>
        </div>
      </header>

      <!-- Sistema de Pesta√±as -->
      <div class="tabs">
        <div class="tabs__header" role="tablist">
          <button class="tabs__tab tabs__tab--active" data-tab="projects" role="tab" aria-selected="true" aria-controls="projects-panel">
            Proyectos
          </button>
          <button class="tabs__tab" data-tab="admin" role="tab" aria-selected="false" aria-controls="admin-panel">
            Administraci√≥n
          </button>
        </div>

        <!-- Pesta√±a de Proyectos -->
        <div id="projects-panel" class="tabs__panel tabs__panel--active" role="tabpanel" aria-labelledby="projects-tab">
          <section class="card card--inline" aria-label="Filtros de proyectos">
        <form id="filtersForm" class="filters" autocomplete="off">
          <label class="filters__field">
            <span>B√∫squeda</span>
            <input
              id="filterSearch"
              name="filterSearch"
              type="search"
              placeholder="Nombre, responsable o desarrollador"
            />
          </label>
          <label class="filters__field">
            <span>√Årea</span>
            <select id="filterArea" name="filterArea">
              <option value="">Todas</option>
            </select>
          </label>
          <label class="filters__field">
            <span>Prioridad</span>
            <select id="filterPriority" name="filterPriority">
              <option value="">Todas</option>
              <option value="alta">Alta</option>
              <option value="media">Media</option>
              <option value="baja">Baja</option>
              <option value="a-definir">A definir</option>
            </select>
          </label>
          <label class="filters__field">
            <span>Estado</span>
            <select id="filterStatus" name="filterStatus">
              <option value="">Todos</option>
              <option value="en-analisis">En an√°lisis</option>
              <option value="en-desarrollo">En desarrollo</option>
              <option value="terminado">Terminado</option>
            </select>
          </label>
          <div class="filters__actions">
            <button id="clearFilters" class="button button--ghost" type="button">
              Limpiar filtros
            </button>
          </div>
        </form>
        <p id="filtersSummary" class="filters__summary" role="status" aria-live="polite"></p>
      </section>

      <section class="card" aria-labelledby="form-title">
        <div class="card__header">
          <div>
            <h2 id="form-title">Nuevo proyecto</h2>
            <p class="card__subtitle">
              Completa la informaci√≥n para a√±adir un proyecto a tu tablero.
            </p>
          </div>
          <button id="cancelEdit" class="button button--ghost" type="button">
            Cancelar edici√≥n
          </button>
        </div>
        <form id="projectForm" class="form">
          <input type="hidden" id="projectId" name="projectId" />
          <div class="form__grid">
            <label class="form__field">
              <span>Nombre del proyecto *</span>
              <input
                id="name"
                name="name"
                type="text"
                required
                placeholder="Ej. Redise√±o del portal"
              />
            </label>
            <label class="form__field">
              <span>√Årea *</span>
              <select id="area" name="area" required>
              </select>
            </label>
            <label class="form__field">
              <span>Responsable</span>
              <select id="owner" name="owner">
                <option value="">Sin asignar</option>
              </select>
            </label>
            <label class="form__field">
              <span>Desarrolladores</span>
              <select
                id="developers"
                name="developers"
                multiple
                size="4"
                style="min-height: 80px;"
              >
                <option value="Diego Gatica">Diego Gatica</option>
                <option value="Alan Basualdo">Alan Basualdo</option>
                <option value="Vicente D'alesandro">Vicente D'alesandro</option>
                <option value="Gaspar Diaz">Gaspar Diaz</option>
              </select>
              <small>
                Mant√©n presionada la tecla <kbd>Ctrl</kbd> (o <kbd>Cmd</kbd> en Mac) para seleccionar m√∫ltiples desarrolladores
              </small>
            </label>
            <label class="form__field">
              <span>Estimaci√≥n (horas)</span>
              <input
                id="estimate"
                name="estimate"
                type="number"
                min="0"
                step="1"
                placeholder="Ej. 120"
                title="Horas laborales de 8 a 18hs. de lunes a viernes"
              />
            </label>
            <label class="form__field">
              <span>Puntos</span>
              <input
                id="points"
                name="points"
                type="number"
                min="0"
                step="1"
                placeholder="Ej. 3"
              />
            </label>
            <label class="form__field">
              <span>Fecha de inicio</span>
              <input id="startDate" name="startDate" type="date" />
            </label>
            <label class="form__field">
              <span>Fecha de fin</span>
              <input id="endDate" name="endDate" type="date" />
            </label>
            <label class="form__field">
              <span>Prioridad</span>
              <select id="priority" name="priority">
                <option value="alta">Alta</option>
                <option value="media" selected>Media</option>
                <option value="baja">Baja</option>
                <option value="a-definir">A definir</option>
              </select>
            </label>
            <label class="form__field">
              <span>Estado</span>
              <select id="status" name="status">
                <option value="en-analisis">En an√°lisis</option>
                <option value="en-desarrollo">En desarrollo</option>
                <option value="terminado">Terminado</option>
              </select>
            </label>
            <label class="form__field form__field--full">
              <span>Observaciones</span>
              <textarea
                id="description"
                name="description"
                rows="3"
                placeholder="Agrega contexto adicional o notas relevantes"
              ></textarea>
            </label>
          </div>
          <div class="form__actions">
            <button class="button" type="submit">Guardar proyecto</button>
          </div>
        </form>
      </section>

      <section class="board" id="board" aria-live="polite"></section>

      <section class="list" id="listView" aria-live="polite">
        <div class="list__header">
          <h2>Proyectos</h2>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Proyecto</th>
                <th>√Årea</th>
                <th>Responsable</th>
                <th>Desarrolladores</th>
                <th title="Horas laborales de 8 a 18hs. de lunes a viernes">Estimaci√≥n</th>
                <th>Puntos</th>
                <th>Inicio</th>
                <th>Fin</th>
                <th>Prioridad</th>
                <th>Estado</th>
                <th>Observaciones</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="listBody"></tbody>
          </table>
        </div>
      </section>

      <section class="timeline" id="timelineView" aria-live="polite" style="display: none;">
        <div class="timeline__header">
          <h2>L√≠nea de Tiempo de Proyectos</h2>
          <div class="timeline__filters">
            <div class="timeline__filter-group">
              <label class="timeline__filter-label">
                <span>Desde</span>
                <input
                  type="date"
                  id="timelineDateFrom"
                  class="timeline__filter-input"
                />
              </label>
              <label class="timeline__filter-label">
                <span>Hasta</span>
                <input
                  type="date"
                  id="timelineDateTo"
                  class="timeline__filter-input"
                />
              </label>
              <button
                type="button"
                id="timelineFilterApply"
                class="button button--secondary"
              >
                Aplicar
              </button>
              <button
                type="button"
                id="timelineFilterReset"
                class="button button--ghost"
              >
                Limpiar
              </button>
            </div>
            <div class="timeline__quick-filters">
              <button
                type="button"
                class="timeline__quick-filter button button--ghost button--small"
                data-period="month"
              >
                Este mes
              </button>
              <button
                type="button"
                class="timeline__quick-filter button button--ghost button--small"
                data-period="quarter"
              >
                Este trimestre
              </button>
              <button
                type="button"
                class="timeline__quick-filter button button--ghost button--small"
                data-period="year"
              >
                Este a√±o
              </button>
              <button
                type="button"
                class="timeline__quick-filter button button--ghost button--small"
                data-period="all"
              >
                Todos
              </button>
            </div>
          </div>
        </div>
        <div class="timeline__container" id="timelineContainer"></div>
      </section>
        </div>

        <!-- Pesta√±a de Administraci√≥n -->
        <div id="admin-panel" class="tabs__panel" role="tabpanel" aria-labelledby="admin-tab">
          <section class="card" aria-label="Administraci√≥n de responsables y desarrolladores">
            <div class="card__header">
              <div>
                <h2>Administraci√≥n de Personas y √Åreas</h2>
                <p class="card__subtitle">
                  Gestiona la lista de √°reas, responsables y desarrolladores del sistema.
                </p>
              </div>
            </div>
            
            <div class="people-admin">
              <div class="people-admin__section">
                <h3 class="people-admin__title">√Åreas</h3>
                <form id="areaForm" class="people-admin__form">
                  <div class="people-admin__input-group">
                    <input
                      id="newArea"
                      type="text"
                      placeholder="Nombre del √°rea"
                      required
                    />
                    <button class="button" type="submit">Agregar</button>
                  </div>
                </form>
                <ul id="areasList" class="people-admin__list"></ul>
              </div>

              <div class="people-admin__section">
                <h3 class="people-admin__title">Responsables</h3>
                <form id="ownerForm" class="people-admin__form">
                  <div class="people-admin__input-group">
                    <input
                      id="newOwner"
                      type="text"
                      placeholder="Nombre del responsable"
                      required
                    />
                    <button class="button" type="submit">Agregar</button>
                  </div>
                </form>
                <ul id="ownersList" class="people-admin__list"></ul>
              </div>

              <div class="people-admin__section">
                <h3 class="people-admin__title">Desarrolladores</h3>
                <form id="developerForm" class="people-admin__form">
                  <div class="people-admin__input-group">
                    <input
                      id="newDeveloper"
                      type="text"
                      placeholder="Nombre del desarrollador"
                      required
                    />
                    <button class="button" type="submit">Agregar</button>
                  </div>
                </form>
                <ul id="developersList" class="people-admin__list"></ul>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <template id="projectCardTemplate">
      <article class="project" draggable="true">
        <header class="project__header">
          <h3 class="project__title"></h3>
          <span class="project__priority"></span>
        </header>
        <dl class="project__meta"></dl>
        <p class="project__description"></p>
        <footer class="project__footer">
          <div class="project__people"></div>
          <div class="project__actions">
            <button class="button button--ghost project__view-detail" type="button">
              Ver detalle
            </button>
            <button class="button button--ghost project__move-left" type="button">
              ‚óÄ
            </button>
            <button class="button button--ghost project__move-right" type="button">
              ‚ñ∂
            </button>
            <button class="button button--ghost project__edit" type="button">
              Editar
            </button>
            <button class="button button--ghost project__delete" type="button">
              Eliminar
            </button>
          </div>
        </footer>
      </article>
    </template>

    <!-- Modal de detalle del proyecto -->
    <div id="modalOverlay" class="modal-overlay"></div>
    <div id="projectDetailModal" class="modal">
      <div class="modal__header">
        <h2 class="modal__title">Detalle del Proyecto</h2>
        <button id="modalClose" class="button button--ghost modal__close" type="button" aria-label="Cerrar">
          ‚úï
        </button>
      </div>
      <div class="modal__body">
        <div class="modal__project-info">
          <h3 id="modalProjectName" class="modal__project-name"></h3>
          <div class="modal__project-meta">
            <div class="modal__meta-item">
              <span class="modal__meta-label">√Årea:</span>
              <span id="modalProjectArea" class="modal__meta-value"></span>
            </div>
            <div class="modal__meta-item">
              <span class="modal__meta-label">Responsable:</span>
              <span id="modalProjectOwner" class="modal__meta-value"></span>
            </div>
          </div>
          <p id="modalProjectDescription" class="modal__project-description"></p>
        </div>

        <div class="modal__tasks-section">
          <div class="modal__tasks-header">
            <h3 class="modal__section-title">Tareas del Proyecto</h3>
            <div id="modalTasksSummary" class="tasks-summary"></div>
          </div>

          <form id="taskForm" class="task-form">
            <div class="task-form__header">
              <h4 id="taskFormTitle" class="task-form__title">Nueva tarea</h4>
              <button id="cancelTaskEdit" class="button button--ghost" type="button" style="display: none;">
                Cancelar edici√≥n
              </button>
            </div>
            <div class="task-form__grid">
              <label class="form__field">
                <span>T√≠tulo de la tarea *</span>
                <input
                  id="taskTitle"
                  name="taskTitle"
                  type="text"
                  required
                  placeholder="Ej. Configurar servidor MCP"
                />
              </label>
              <label class="form__field">
                <span>Asignado a</span>
                <select id="taskAssignedTo" name="taskAssignedTo" multiple size="4" class="task-assigned-select">
                  <option value="">Sin asignar</option>
                </select>
                <small>
                  Mant√©n presionada la tecla <kbd>Ctrl</kbd> (o <kbd>Cmd</kbd> en Mac) para seleccionar m√∫ltiples desarrolladores
                </small>
              </label>
              <label class="form__field">
                <span>Tiempo estimado (horas)</span>
                <input
                  id="taskEstimatedTime"
                  name="taskEstimatedTime"
                  type="number"
                  min="0"
                  step="0.5"
                  placeholder="Ej. 6"
                />
              </label>
              <label class="form__field">
                <span>Estado</span>
                <select id="taskStatus" name="taskStatus">
                  <option value="pendiente">Pendiente</option>
                  <option value="en-progreso">En progreso</option>
                  <option value="hecha">Hecha</option>
                </select>
              </label>
              <label class="form__field form__field--full">
                <span>Descripci√≥n</span>
                <textarea
                  id="taskDescription"
                  name="taskDescription"
                  rows="2"
                  placeholder="Detalle breve de lo que se debe realizar"
                ></textarea>
              </label>
            </div>
            <div class="form__actions">
              <button class="button" type="submit">Guardar tarea</button>
            </div>
          </form>

          <div id="taskList" class="task-list"></div>
        </div>
      </div>
    </div>

    <script src="js/app.js" type="module"></script>
  </body>
</html>
